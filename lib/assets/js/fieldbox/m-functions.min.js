import{fBoxList as e}from"./m-fboxlist.min.js?v=1727180045";import{fieldBox as t}from"./m-fieldbox.min.js?v=1727180045";const r=t=>{const r=document.querySelectorAll(`.rds-field-box:not([id="${t.id}"] .rds-field-box)`);let n=0;for(let e=0;e<r.length;++e)if(r[e].id==t.id){n=e;break}if(n<=0)return;let o,i,l,s=0,a=!1,p=n;for(o=e.list[r[n].id],p--;!a&&p>=0;){if(i=e.list[r[p].id],l="root"==i.parentID?"root":e.list[i.parentID].type,i.parentID==o.parentID){s=p,a=!0;break}if(o.wrappers.includes(i.type)&&i.id!=o.parentID){s=p,a=!0;break}if(o.wrappers.includes(l)){s=p,a=!0;break}p--}a&&(o.wrappers.includes(i.type)&&i.id!=o.parentID?r[s].querySelector(".rds-field-boxes").append(r[n]):i.parentID==o.parentID||["tabs","tab","container"].includes(i.type)?r[s].parentElement.insertBefore(r[n],r[s]):r[s].parentElement.append(r[n]))},n=t=>{const r=document.querySelectorAll(`.rds-field-box:not([id="${t.id}"] .rds-field-box)`);let n=0;for(let e=0;e<r.length;++e)if(r[e].id==t.id){n=e;break}if(n>=r.length)return;let o,i,l,s=0,a=!1,p=n;if(o=e.list[r[n].id],n==r.length-1&&"root"!=o.parentID&&o.wrappers.includes("root"))document.querySelector(".rds-field-boxes").append(r[n]);else{for(p++;!a&&p<r.length;){if(i=e.list[r[p].id],l="root"==i.parentID?"root":e.list[i.parentID].type,"root"!=i.parentID&&o.wrappers.includes(l)){s=p,a=!0;break}if(o.wrappers.includes(i.type)){s=p,a=!0;break}if(!["tabs","tab","container"].includes(i.type)&&o.wrappers.includes(l)){s=p,a=!0;break}p++}if(a)if(o.wrappers.includes(i.type))r[s].querySelector(".rds-field-boxes").prepend(r[n]);else if(o.parentID==i.parentID){const e=r[s].nextSibling;null===e?r[s].parentElement.appendChild(r[n]):e.parentElement.insertBefore(r[n],e)}else r[s].parentElement.insertBefore(r[n],r[s])}},o=t=>{const o=t.target,i=e.get(o.closest(".rds-field-box").id);"ArrowUp"!=t.code&&"ArrowLeft"!=t.code||(t.preventDefault(),r(i)),"ArrowDown"!=t.code&&"ArrowRight"!=t.code||(t.preventDefault(),n(i)),o.focus()},i=e=>{const r=new t;r.type="text",r.node.classList.add("expanded"),r.parentID=e,r.node.scrollIntoView({behavior:"smooth",block:"start",inline:"start"}),r.elBinded("type").focus()},l=(e,r,n={})=>{const o=new t,i=n.hasOwnProperty("before")?n.before:null,s=n.hasOwnProperty("after")?n.after:null;return"function"==typeof i&&i(o,e),o.parentID=r,e.options.forEach((e=>{o.addOption(e)})),e.attributes.forEach((e=>{o.addAttribute(e)})),o.type=e.type,o.name=e.name,o.label=e.label,o.description=e.description,o.default_value=e.default_value,o.classes=e.classes,e.fields.forEach((e=>{l(e,o.id,n)})),"function"==typeof s&&s(o,e),o};export{r as fBoxMoveUp,n as fBoxMoveDown,o as keydownMoveIconFBox,i as clickAddNew,l as createFBox};