import{showSpinner as e,popupAlert as t,getFormValue as s}from"../../../lib/assets/js/general/m-general.min.js?v=1727180045";import{adminFlashNotice as a}from"../../../lib/assets/js/m-admin.min.js?v=1727180045";import{setErrorMessage as r}from"../../../lib/assets/js/m-utils.min.js?v=1727180045";const o=jQuery,n=e=>(r(e),!!e.checkValidity()||(r(e,e.validationMessage),!1));o(document).ready((()=>{let r;const i=document.querySelector("form");r=s(i),i.setAttribute("novalidate",!0),i.addEventListener("input",(e=>{n(e.target)})),i.addEventListener("submit",(d=>{if(e(!0),d.preventDefault(),r==s(i))return t("No Update","You haven't changed the data"),void e(!1);let l=!0;if(Object.values(document.querySelectorAll(".rds-input")).forEach((e=>{"none"!==window.getComputedStyle(e.closest(".rds-field")).display&&(n(e)||(l=!1))})),!l)return t("Data Validation","Save failed, please check your input!"),void e(!1);const p=new FormData(i),c=wpApiSettings.root+i.getAttribute("data-endpoint");o.ajax({url:c,method:"post",data:p,processData:!1,contentType:!1,beforeSend:e=>{e.setRequestHeader("X-WP-Nonce",wpApiSettings.nonce)},success:t=>{e(!1),a("success",t.message),r=s(i)},error:s=>{e(!1),s.hasOwnProperty("responseJSON")&&s.responseJSON.hasOwnProperty("message")?t("Save Failed",s.responseJSON.message):a("error",s.responseText,1e4)}})}))}));